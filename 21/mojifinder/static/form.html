<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Mojifinder</title>
    <script>
        "use strict";

        function fillTable(results){
            console.log(results)
        };

        async function fetchResults(query){
            let url = location.href.replace(location.search, '');
            const response = await fetch(`${url}search?q=${query}`);
            if (response.ok) {
                return response.json();
            } else {
                throw new Error(`HTTP error: ${response.status}`);
            };
        }

        function updateTable(event){
            const input = document.getElementById('query');
            fetchResults(input.value)
                .then(fillTable)
                .catch(error => console.log(error));
        }

        window.addEventListener('DOMContentLoaded', (event) => {
            const input = document.getElementById('query');
            input.addEventListener('change', updateTable)
        });
    </script>
</head>
<body>
    <div>
        <input id="query" type="search" name="q" value="">
        <button onClick="updateTable()">Search</button>
        </div>
    <table>
        <caption></caption>
    </table>
</body>
</html>